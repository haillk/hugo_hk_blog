---
title: 'Ext2文件系统'
tags: 
-
categories: 
- Linux
date: "2020-07-14T22:12:20+08:00"
comment:  true    
---

与你常在

<!--more-->

有点枯燥，不确定今天晚上能不能看完。。

常见的磁盘接口IDE接口(dev/hd[a-d])，SATA接口（dev/sd[a-p]）

每个扇区512b,

第一个扇区记录了两个重要信息：

1. 主引导分区MBR（安装引导加载程序的地方，446bytes）
2. 分区表（记录整块硬盘分区的状态,例子：400个柱面，分区规则p1:1-100柱面，p2:101-200柱面。。。默认4个分区），分为主分区表和扩展分区表，拓展分区表又可以划分为逻辑分区。主分区和逻辑分区可以被格式化，拓展分区不行。

### inode和block

文件权限和文件属性放置到inode中（一个文件占用一个inode，同时记录文件数据所在的block编号），数据放到datablock中。superblock会记录整体信息，包括inode和block是使用量。

inode和block关系图解：一个文件的属性放到inode4号，对应的数据放到了block2,7,13,15号中。称为索引式文件系统。

![30137616figure_0213_0199.png](http://www.haillk.top:8888/images/2020/07/14/30137616figure_0213_0199.png)

ext2中创建目录：分配一个inode记录目录的属性，和至少一个blokc记录目录下的文件名和该文件名对应的inode.

`ls -i`显示inode

### 磁盘与目录的容量

- df命令

列出文件系统的整体磁盘使用量。（-i显示inode数量，-h自动添加k,M等单位，）df读取的范围主要是**superblock**中的信息，所以**显示很是快速**。

- du命令

列出文件或者目录的内存使用。

`du -s`列出总量

`du -S`不计算子目录中的统计



